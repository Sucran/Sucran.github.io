<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[超燃老哥]]></title>
  <link href="chaoranlaoge.top/atom.xml" rel="self"/>
  <link href="chaoranlaoge.top/"/>
  <updated>2021-02-07T23:11:59+08:00</updated>
  <id>chaoranlaoge.top/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="http://www.mweb.im/">MWeb</generator>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="chaoranlaoge.top/16127105620051.html"/>
    <updated>2021-02-07T23:09:22+08:00</updated>
    <id>chaoranlaoge.top/16127105620051.html</id>
    <content type="html"><![CDATA[
<h1 id="toc_0">Centos7 Hadoop集群安装</h1>

<p>阿里云上申请三台每小时0.5块钱的机器，一小时总花费1.5块钱。<br/>
根据以下教程，在20分钟之内，搞定整个Hadoop单Master集群部署。</p>

<span id="more"></span><!-- more -->

<p>先在阿里云上申请3台最便宜的服务器，在同一个区就行，然后就直接开搞</p>

<h2 id="toc_1">设置hosts和ssh</h2>

<pre><code class="language-shell">vim /etc/hosts

# 添加内网IP以及相应的hostname，比如：
172.31.140.249 node03
172.31.140.244 node01
172.31.140.246 node02
# :wq保存退出

# 如果没有设置对hostname, 如下设置命令
hostnamectl set-hostname node01
</code></pre>

<ul>
<li>安装依赖</li>
</ul>

<pre><code class="language-shell">yum install ssh, pdsh
</code></pre>

<ul>
<li>三台机器设置免密</li>
</ul>

<pre><code class="language-shell"># 举个例子，将node02到node01的登陆免密
[root@node02 ~]: ssh-keygen # 三次回车，不设置额外明文密码，生成自己机器的pub公共密钥文件，id_rsa.pub
[root@node02 ~]: scp ~/.ssh/id_rsa.pub node01:~/.ssh/node02.pub  # 配置自己登陆自己的公钥
# 登陆node01
[root@node01 ~]: cat ~/.ssh/node02.pub &gt;&gt; ~/.ssh/authorized_keys # 追加免认证密钥
# 登陆node02
[root@node02 ~]: ssh node01 #此时就免认证

# 然后这里有没有什么更快捷的方法能相互认证免密？
</code></pre>

<h2 id="toc_2">安装JDK</h2>

<p>从Oracle官网（需要登陆账号，没有的需要先注册再下载）下载安装压缩包，上传到一台阿里云服务器，其他的用内网传输</p>

<ul>
<li>创建安装目录</li>
</ul>

<pre><code class="language-shell">mkdir /usr/local/java/
</code></pre>

<ul>
<li>解压至安装目录</li>
</ul>

<pre><code class="language-shell">tar -zxvf jdk-8u281-linux-x64.tar.gz -C /usr/local/java/
</code></pre>

<ul>
<li>设置环境变量</li>
</ul>

<pre><code class="language-shell"># 修改配置文件
vim /etc/profile
# 输入 G, o, 进入insert模式，然后粘贴以下内容
export JAVA_HOME=/usr/local/java/jdk1.8.0_281
export JRE_HOME=${JAVA_HOME}/jre
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib
export PATH=${JAVA_HOME}/bin:$PATH
# esc 输入:wq 退出vim
source /etc/profile # 使环境变量生效
ln -s /usr/local/java/jdk1.8.0_171/bin/java /usr/bin/java # 添加软链接
java -version # 验证

</code></pre>

<h2 id="toc_3">安装Hadoop</h2>

<ul>
<li>下载Hadoop</li>
</ul>

<pre><code class="language-shell">wget https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.2.2/hadoop-3.2.2.tar.gz
</code></pre>

<ul>
<li>解压到文件夹并重命名</li>
</ul>

<pre><code class="language-shell">tar -xzvf hadoop-3.2.2.tar.gz -C /usr/local
mv /usr/local/hadoop-3.2.2 /usr/local/hadoop
</code></pre>

<h2 id="toc_4">修改hadoop配置</h2>

<ul>
<li>core-site.xml</li>
</ul>

<pre><code class="language-markup">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;
        &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://node01:9000&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<blockquote>
<p><strong>特别注意：如没有配置<code>hadoop.tmp.dir</code>参数，此时系统默认的临时目录为：<code>/tmp/hadoo-hadoop</code>。而这个目录在每次重启后都会被删除，必须重新执行format才行，否则会出错。</strong></p>

<p>摘自博客 - 纯洁的微笑 - hadoop分布式集群搭建</p>
</blockquote>

<ul>
<li>hdfs-site.xml</li>
</ul>

<pre><code class="language-markup">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
        &lt;value&gt;3&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.name.dir&lt;/name&gt;
        &lt;value&gt;/usr/local/hadoop/hdfs/name&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.data.dir&lt;/name&gt;
        &lt;value&gt;/usr/local/hadoop/hdfs/data&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<ul>
<li>mapred-site.xml</li>
</ul>

<pre><code class="language-markup">&lt;configuration&gt;
  &lt;property&gt;
      &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
      &lt;value&gt;yarn&lt;/value&gt;
  &lt;/property&gt;
   &lt;property&gt;
      &lt;name&gt;mapred.job.tracker&lt;/name&gt;
      &lt;value&gt;http://hadoop-master:9001&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<ul>
<li>yarn-site.xml</li>
</ul>

<pre><code class="language-markup">&lt;configuration&gt;
&lt;!-- Site specific YARN configuration properties --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
        &lt;value&gt;hadoop-master&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<ul>
<li>修改执行用户</li>
</ul>

<p>在start-dfs.sh和stop-dfs.sh中开头空白处添加：</p>

<pre><code class="language-shell">HDFS_DATANODE_USER=root
HADOOP_SECURE_DN_USER=hdfs
HDFS_NAMENODE_USER=root
HDFS_SECONDARYNAMENODE_USER=root 
</code></pre>

<p>在start-yarn.sh和stop-yarn.sh开头空白处添加：</p>

<pre><code class="language-shell">YARN_RESOURCEMANAGER_USER=root
HADOOP_SECURE_DN_USER=yarn
YARN_NODEMANAGER_USER=root
</code></pre>

<ul>
<li>配置JAVA_HOME到hadoop-env.sh和yarn-env.sh</li>
</ul>

<pre><code class="language-shell"># 输入 G, o, 进入insert模式，然后粘贴以下内容
export JAVA_HOME=/usr/local/java/jdk1.8.0_281
</code></pre>

<ul>
<li>同步hadoop文件夹到其他slave服务器</li>
</ul>

<pre><code class="language-shell">scp -r /usr/local/hadoop node02:/usr/local/
scp -r /usr/local/hadoop node03:/usr/local/
</code></pre>

<ul>
<li>workers文件</li>
</ul>

<pre><code class="language-shell">vi /usr/local/hadoop/etc/hadoop/slaves
## 内容
node02
node03
</code></pre>

<ul>
<li>配置环境变量</li>
</ul>

<pre><code class="language-shell"># 修改配置文件
vim /etc/profile
# 输入 G, o, 进入insert模式，然后粘贴以下内容
export HADOOP_HOME=/usr/local/hadoop
export PATH=$PATH:$HADOOP_HOME/bin 
# esc 输入:wq 退出vim
source /etc/profile # 使环境变量生效
</code></pre>

<h2 id="toc_5">启动Hadoop</h2>

<pre><code class="language-shell">cd $HADOOP_HOME
# 首次启动才需要
bin/hadoop namenode -format 

# 启动集群
sbin/start-all.sh

# 关闭集群
sbin/stop-all.sh
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平平无奇，靠什么弯道超车]]></title>
    <link href="chaoranlaoge.top/16101634062262.html"/>
    <updated>2021-01-09T11:36:46+08:00</updated>
    <id>chaoranlaoge.top/16101634062262.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">读《冯唐成事心法》的思考（二）</h2>

<blockquote>
<p>人生惟有常是第一美德。<br/>
凡事皆用困知勉行功夫，不可求名太骤，求效太捷也。<br/>
困时切莫间断，熬过此关，便可少进。<br/>
不特习字，凡事皆有极困极难之时，打得通的，便是好汉。<br/>
临事静对猛虎，事了闲看落花。<br/>
敬字，恒字二端，是彻始彻终工夫。鄙人生平欠此二字，至今老而无成，深自悔憾。</p>
</blockquote>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[年轻人，你要倔强]]></title>
    <link href="chaoranlaoge.top/16101619474323.html"/>
    <updated>2021-01-09T11:12:27+08:00</updated>
    <id>chaoranlaoge.top/16101619474323.html</id>
    <content type="html"><![CDATA[
<h2 id="toc_0">读《冯唐成事心法》的思考（一）</h2>

<blockquote>
<p>强自禁制，降伏此心。释氏谓之降龙伏虎，龙即相火也，虎即肝火也。多少英雄豪杰打此二关不破，亦不仅余与弟为然，要在稍稍遏抑，不令过炽。古圣所谓窒欲，即降龙也；所谓惩忿，即伏虎也。释儒之道不同，而其节制血气未尝不同。总不使吾之嗜欲戕害吾之躯命而已。至于倔强二字，却不可少。功业文章，皆须有此二字贯注其中。孟子所谓至刚，孔子所谓贞固，皆从倔强二字做出。吾兄弟好处正在倔强。若能去忿欲以养体，存倔强以励志，则日进无疆矣。</p>
</blockquote>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Lecture 1]]></title>
    <link href="chaoranlaoge.top/16053228002405.html"/>
    <updated>2020-11-14T11:00:00+08:00</updated>
    <id>chaoranlaoge.top/16053228002405.html</id>
    <content type="html"><![CDATA[

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Go 安装技巧 + IDE + 资源推荐]]></title>
    <link href="chaoranlaoge.top/16051903090609.html"/>
    <updated>2020-11-12T22:11:49+08:00</updated>
    <id>chaoranlaoge.top/16051903090609.html</id>
    <content type="html"><![CDATA[
<ul>
<li>本文主要为初学者提供了Windows和Mac的防止被墙的安装技巧</li>
<li>最后给初学者推荐了优质电子书/网站/学习资源及课程</li>
<li>阅读时间5分钟</li>
<li>免费附赠电子书下载网址，求关注！
<span id="more"></span><!-- more --></li>
</ul>

<blockquote>
<p>Go（又称Golang）是Google开发的一种静态强类型、编译型、并发型，并具有垃圾回收功能的编程语言。</p>
</blockquote>

<p>学习Go，可能是很多CS学生或者技术爱好者拥抱云原生浪潮最开始的第一步，但无奈的是，大多数人在第一个浪来的时候，就被拍死在沙滩上了。这里主要是以下几个原因：</p>

<ol>
<li>由于是谷歌公司开发的语言，Go语言的官方网址是托管在谷歌服务器上的，所以国内访问被墙是毫无疑问。</li>
<li>官方网站无法访问的情况下，不知道去哪里获取语言安装包，其次不知道去哪里获取标准的官方文档。</li>
<li>由于Go语言开发时，谷歌公司选择利用Github进行托管，导致Go语言相关的核心依赖包也顺理成章地都托管在Github上，当使用命令 <code>go get</code> 时基本上都会连接超时而无法下载依赖包，这个相当于是第二个噩耗（国内访问Github也是经常连不上，语言安装完成之后，依赖包无法下载就更无法处理程序编译了）。</li>
<li>如果有科学上网梯子，那以上3个问题就迎刃而解。（不得不吐槽，对于国内CS学生或者技术爱好者，科学上网梯子真的太重要了）最后，工欲善其事，必先利其器。选择哪一款“低价/免费”的趁手兵器（IDE），就是困扰初学者敲代码前的最后一个问题了。</li>
</ol>

<p>很多人，看不上前面4个问题，放弃入门Go出门左拐去拥抱Python了，也有很多人，看了这个教程，从现在开始的5分钟之后就开始运行完了HelloWorld。</p>

<h2 id="toc_0">Go Windows和Mac安装小技巧</h2>

<p>进入这个章节，我们着眼于解决前文提到的第一个问题：Go语言官方网站国内访问不上，如何安装Go语言。</p>

<h3 id="toc_1">从国内网站下载</h3>

<p>国内支持下载安装包的网址有：</p>

<ol>
<li><a href="https://studygolang.com/dl">Go语言中文网下载页面</a></li>
</ol>

<p>如果有梯子的话，官方下载地址为：<a href="https://golang.org/dl/">GoLang官网下载页面</a></p>

<p>下载完成之后，对于Windows和MacOS双击启动安装，并遵循提示进行安装。<br/>
安装完成之后，会将可执行二进制文件的文件夹<code>bin</code>目录加入系统的<code>PATH</code>环境变量。</p>

<h3 id="toc_2">修改国内镜像加速依赖包下载</h3>

<p>国内镜像加速的方式，是通过开启国内代理的方式实现的。具体的方式可以参考(Go社区Wiki)[<a href="https://learnku.com/go/wikis/38122">https://learnku.com/go/wikis/38122</a>]:</p>

<pre><code class="language-shell"># 对于类Unix系统
# 启用 Go Modules 功能
go env -w GO111MODULE=on

# 配置 GOPROXY 环境变量，以下三选一

# 1. 七牛 CDN
go env -w  GOPROXY=https://goproxy.cn,direct

# 2. 阿里云
go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct

# 3. 官方
go env -w  GOPROXY=https://goproxy.io,direct
</code></pre>

<p>对于Windows，该网站给出的脚本有点问题，我在Win10上无法使用，具体被我修改为：</p>

<pre><code class="language-powershell">#对于Windows
# 启用 Go Modules 功能
SETX GO111MODULE=&quot;on&quot;

# 配置 GOPROXY 环境变量，以下三选一

# 1. 七牛 CDN
go env -w GOPROXY=&quot;https://goproxy.cn,direct&quot;

# 2. 阿里云
go env -w GOPROXY=&quot;https://mirrors.aliyun.com/goproxy/,direct&quot;

# 3. 官方
go env -w GOPROXY=&quot;https://goproxy.io,direct&quot;
</code></pre>

<p>需要注意的是，<code>GO111MODULE</code>变量初始值为<code>auto</code>，事实上，设置<code>auto</code>是官方降低语言学习门槛有意为之。</p>

<p>如果设置了环境变量，<code>go env -w</code>设置<code>GO111MODULE</code>变量初始值为<code>auto</code>的时候提示无法写入，一般是大家在ide中操作，大家需要先关闭ide，然后删除环境变量后再执行<code>go env</code>命令进行修改.</p>

<p>我经过折腾之后，也不建议初学者一开始就设置代理（有时候初学者分不清楚到底是Go 语言相关的环境变量是否就是系统环境变量，而且会强制要求写<code>gomod</code>文件），建议一开始还是挂科学上网梯子。</p>

<p>至于为什么会是这样的？如果大家点赞（在看超过50），我会再出一篇《go module 包管理器的上位之路》，由这篇博文来讲述来龙去脉。</p>

<h3 id="toc_3">离线环境安装依赖包</h3>

<p>离线环境安装依赖包，需要提前先下载好依赖，这本身比较麻烦，建议直接安装一体化的IDE工具，比如说GoLand。如果不想使用GoLand，想要使用VSCode，那么参考如下安装教程：</p>

<pre><code class="language-shell">
</code></pre>

<h2 id="toc_4">Go VSCode 编程环境构建</h2>

<h3 id="toc_5">为什么推荐VSCode作为Go的IDE</h3>

<p>vscode要使用梯子，配置首选项添加代理http：//127.0.0.1:1080（ssr）<br/>
go install （win是ctrl+shift+p，mac是cmt+opt+p）</p>

<h3 id="toc_6">安装的包和作用</h3>

<h2 id="toc_7">Go 学习资源推荐</h2>

<h3 id="toc_8">电子书分享</h3>

<h3 id="toc_9">优质网站分享</h3>

<h3 id="toc_10">优质资源分享</h3>

<h3 id="toc_11">优质课程分享</h3>

]]></content>
  </entry>
  
</feed>
